<link href="/main.css" rel="stylesheet" />

<%= JSON.stringify(ê¸€ëª©ë¡) %> <%- include('nav.ejs') -%>
<body class="grey-bg">
  <div class="white-bg">
    <% for(let i = 0; i < ê¸€ëª©ë¡.length; i++){ %>
    <div class="list-box">
      <h4>
        <a href="/detail/<%= ê¸€ëª©ë¡[i]._id %>"> <%= ê¸€ëª©ë¡[i].title %> </a>
      </h4>
      <a href="/edit/<%= ê¸€ëª©ë¡[i]._id %>">âœï¸</a>
      <span class="delete" data-id="<%= ê¸€ëª©ë¡[i]._id %>">ğŸ—‘ï¸</span>
      <!-- ì‚­ì œë²„íŠ¼ì„ ëˆ„ë¥´ë©´
      ì„œë²„ì— ì‚­ì œìš”ì²­ì„ í•˜ê³ 
      ì„œë²„ì—ì„œ ì‚­ì œí•œë‹¤. -->

      <p><%= ê¸€ëª©ë¡[i].content %></p>
    </div>
    <% } %>
  </div>
  <div>
    <a href="/list/1">1</a>
    <a href="/list/2">2</a>
    <a href="/list/3">3</a>
    <a href="/list/4">4</a>
  </div>
</body>

<script>
  document
    .querySelectorAll(".delete")[0]
    .addEventListener("click", function (e) {
      fetch("/delete?docid=" + e.target.dataset.id, {
        method: "DELETE",
      })
        .then((r) => r.text())
        .then((r) => {
          e.target.parentElement.parentElement.style.display = "none";
        });
    });
</script>
